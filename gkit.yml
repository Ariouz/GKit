project:
  name: native-project
  mainClass: fr.ariouz.gkit.Main
  version: "0.0.1"
  variables:
    ARTIFACT_FILE: gkit-test
    NATIVE_FILE: ${gkit.ARTIFACT_FILE}-native

build:
  # optional: project root dir, by default .
  projectDir: tests/test-project
  artifact:
    # optional: build command, if absent, no pre-build command will be run, however a jar file MUST exist
    command: "mvn clean package"
    # required: jar file path
    path: "target/${gkit.ARTIFACT_FILE}-1.0.0.jar"

nativeImage:
  output: "target/${gkit.NATIVE_FILE}"
  # optional: build args, use additionalBuildArgs as a list to use unregistered args
  buildArgs:
    - fallbackImage: false
    - initializeAtBuildTime:
    - verboseBuild: true
    - optimizationLevel: 2
    - debugInfo: true
    - rawArgs: []


# profiles override global values
# gkit build --profile dev
# check build with profile applied:
# gkit check-config --profile dev
profiles:
  dev:
    project:
      version: "1.0.0-dev"
    build:
      artifact:
        command: mvn clean package -Pdev
        path: "target/${gkit.ARTIFACT_FILE}-1.0.0-dev.jar"
    nativeImage:
      output: "target/${gkit.NATIVE_FILE}-dev"
      buildArgs:
        - initializeAtBuildTime: []